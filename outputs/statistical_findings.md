# 통계적 분석 예상 결과 및 주의사항

이 프로젝트에서 통계적으로 신경 쓴 부분과 실제 데이터에서 확인된 예상 결과를 정리한다.

---

## 1. 클래스 불균형 (Class Imbalance)

**문제**: 퇴사(Yes) 237명(16.1%) vs 재직(No) 1,233명(83.9%), 비율 약 1:5.2

**왜 중요한가**:
- "전부 재직으로 예측"해도 정확도 83.9%가 나오므로, Accuracy만으로는 모델 성능을 판단할 수 없다.
- 실무에서 중요한 것은 **퇴사자를 얼마나 잡아내는가(Recall)**이다. 놓치면 비용이 크다.

**대응 전략**:
| 방법 | 설명 | 예상 효과 |
|------|------|----------|
| `class_weight='balanced'` | 소수 클래스에 높은 가중치 부여 | Recall 대폭 상승, Accuracy 소폭 하락 |
| SMOTE 오버샘플링 | 소수 클래스 합성 데이터 생성 | Recall 상승, 과적합 위험 존재 |
| 평가지표 변경 | F1, Recall, AUC-ROC 중심 평가 | 비즈니스 목적에 부합하는 평가 |

**예상 결과** (5-Fold CV, Random Forest 기준):

|  | Accuracy | Recall | F1 |
|--|----------|--------|----|
| 기본 (class_weight=None) | ~0.85 | ~0.35 | ~0.45 |
| balanced (class_weight) | ~0.82 | ~0.65 | ~0.55 |

> 포트폴리오 포인트: "정확도 85%"보다 "퇴사자 Recall 65% 달성, 누락 비용 35% 절감"이 HR에게 설득력 있다.

---

## 2. 통계 검정으로 검증한 유의미한 변수

### 2.1 수치형 변수 — 독립표본 t-test

퇴사자 vs 재직자 평균 차이를 검정했다. 효과 크기(Cohen's d)로 실질적 차이도 확인했다.

| 변수 | 퇴사자 평균 | 재직자 평균 | Cohen's d | p-value | 판정 |
|------|-----------|-----------|----------|---------|------|
| **MonthlyIncome** | 4,787 | 6,833 | -0.479 | <0.001 | *** |
| **TotalWorkingYears** | 8.2 | 11.9 | -0.484 | <0.001 | *** |
| **Age** | 33.6 | 37.6 | -0.425 | <0.001 | *** |
| **YearsInCurrentRole** | 2.9 | 4.5 | -0.462 | <0.001 | *** |
| **YearsWithCurrManager** | 2.9 | 4.4 | -0.449 | <0.001 | *** |
| **YearsAtCompany** | 5.1 | 7.4 | -0.372 | <0.001 | *** |
| **DistanceFromHome** | 10.6 | 8.9 | +0.209 | 0.003 | ** |
| YearsSinceLastPromotion | 1.9 | 2.2 | -0.091 | 0.206 | ns |
| PercentSalaryHike | 15.1 | 15.2 | -0.036 | 0.606 | ns |
| HourlyRate | 65.6 | 66.0 | -0.019 | 0.793 | ns |

**인사이트**:
- 소득, 총경력, 나이, 현직무 기간이 **중간 효과 크기(|d| > 0.4)**로 퇴사와 뚜렷하게 관련
- 연봉 인상률(PercentSalaryHike)과 시급(HourlyRate)은 퇴사와 **무관** — 흔한 오해를 데이터로 반박 가능
- 통근거리(DistanceFromHome)는 유의하지만 효과 크기는 작은 편(d=0.209)

### 2.2 범주형 변수 — 카이제곱 검정

| 변수 | Chi-square | Cramer's V | p-value | 판정 |
|------|-----------|-----------|---------|------|
| **OverTime** | 87.56 | 0.244 | <0.001 | *** |
| **JobRole** | 86.19 | 0.242 | <0.001 | *** |
| **MaritalStatus** | 46.16 | 0.177 | <0.001 | *** |
| **BusinessTravel** | 24.18 | 0.128 | <0.001 | *** |
| Department | 10.80 | 0.086 | 0.005 | ** |
| EducationField | 16.02 | 0.104 | 0.007 | ** |
| Gender | 1.12 | 0.028 | 0.291 | ns |

**인사이트**:
- **야근(OverTime)**이 가장 강력한 범주형 예측 변수 (V=0.244)
- **성별(Gender)은 퇴사와 통계적으로 무관** — 성별 기반 HR 정책은 근거 없음
- 직무(JobRole)도 강한 연관성 — 특정 직무(Sales Rep, Lab Tech)에 퇴사가 집중

### 2.3 순서형 변수 — Mann-Whitney U 검정

만족도 같은 리커트 척도(1~4) 변수는 정규성 가정이 어려우므로 비모수 검정을 사용했다.

| 변수 | 퇴사자 중앙값 | 재직자 중앙값 | rank-biserial r | p-value | 판정 |
|------|-------------|-------------|----------------|---------|------|
| **StockOptionLevel** | 0 | 1 | +0.250 | <0.001 | *** |
| **JobLevel** | 1 | 2 | +0.283 | <0.001 | *** |
| **JobInvolvement** | 3 | 3 | +0.165 | <0.001 | *** |
| **JobSatisfaction** | 3 | 3 | +0.156 | <0.001 | *** |
| **EnvironmentSatisfaction** | 3 | 3 | +0.146 | <0.001 | *** |
| WorkLifeBalance | 3 | 3 | +0.071 | 0.047 | * |
| Education | 3 | 3 | +0.046 | 0.245 | ns |
| PerformanceRating | 3 | 3 | -0.003 | 0.912 | ns |

**인사이트**:
- 스톡옵션이 없는 직원(Level 0)이 퇴사할 가능성이 뚜렷하게 높음
- 직무 레벨 1(신입)에 퇴사가 집중됨
- 만족도 변수들은 중앙값이 같아도 **분포 형태**가 다름 — 단순 평균 비교가 아닌 검정이 필요한 이유
- **성과평가(PerformanceRating)는 퇴사와 완전히 무관** — "성과 낮은 사람이 나간다"는 편견 반박

---

## 3. 교차 분석 (Interaction Effects)

### 3.1 야근 × 퇴사: 오즈비 분석

```
              재직(No)  퇴사(Yes)
야근 안함(No)    944      110      → 퇴사율 10.4%
야근 함(Yes)     289      127      → 퇴사율 30.5%
```

- **Odds Ratio = 3.77** (95% CI: 2.83 ~ 5.03)
- 해석: 야근하는 직원은 안 하는 직원 대비 **퇴사 오즈가 3.77배** 높다
- 신뢰구간이 1을 포함하지 않으므로 통계적으로 유의

> 포트폴리오 포인트: 단순 퇴사율 비교(10% vs 30%)를 넘어서 오즈비와 신뢰구간을 제시하면 통계적 엄밀성을 보여줄 수 있다.

### 3.2 결혼상태 × 퇴사

| 결혼상태 | 인원 | 퇴사율 |
|---------|------|--------|
| Single | 470 | **25.5%** |
| Married | 673 | 12.5% |
| Divorced | 327 | 10.1% |

- 미혼자의 퇴사율이 기혼/이혼 대비 2배 이상 높음
- 이 자체가 원인이라기보다 **연령, 근속, 소득과의 교란변수(confounding)** 가능성 — 미혼 → 젊은 층 → 낮은 소득/직급

---

## 4. 다중공선성 (Multicollinearity)

모델링 전에 반드시 확인해야 할 **높은 상관관계 쌍 (|r| > 0.5)**:

| 변수 1 | 변수 2 | 상관계수 |
|--------|--------|---------|
| **MonthlyIncome** | **JobLevel** | **+0.950** |
| MonthlyIncome | TotalWorkingYears | +0.773 |
| TotalWorkingYears | JobLevel | +0.782 |
| Age | TotalWorkingYears | +0.680 |
| YearsAtCompany | YearsInCurrentRole | +0.759 |
| YearsAtCompany | YearsWithCurrManager | +0.769 |
| YearsInCurrentRole | YearsWithCurrManager | +0.714 |

**왜 중요한가**:
- Logistic Regression 등 선형 모델에서 계수 해석이 왜곡됨
- MonthlyIncome ↔ JobLevel (r=0.95)은 사실상 같은 정보 → 하나를 제거하거나 PCA 고려

**대응 전략**:
| 접근법 | 적용 대상 | 비고 |
|--------|----------|------|
| VIF 기반 피처 제거 | Logistic Regression | VIF > 10인 변수 순차 제거 |
| 그대로 사용 | Tree 계열 모델 | 트리 모델은 다중공선성에 강건 |
| 도메인 기반 선택 | 전체 | MonthlyIncome과 JobLevel 중 소득을 선택 (HR에게 직관적) |

---

## 5. 모델 평가 지표 선택 근거

### 왜 Accuracy가 아닌 Recall과 F1인가

| 시나리오 | 결과 | 비즈니스 비용 |
|---------|------|-------------|
| 퇴사자를 재직으로 예측 (FN) | 놓침 | **높음** — 채용비용, 지식유실, 팀 사기 저하 |
| 재직자를 퇴사로 예측 (FP) | 오경보 | **낮음** — 불필요한 면담/리텐션 프로그램 비용 |

→ **FN의 비용이 FP보다 크므로** Recall(재현율)을 우선시하되, 과도한 오경보를 통제하기 위해 F1을 종합 지표로 사용

### 예상 평가 지표 범위

| 모델 | Accuracy | Recall | F1 | AUC-ROC |
|------|----------|--------|----|---------|
| Logistic Regression (baseline) | 0.87~0.89 | 0.35~0.45 | 0.40~0.50 | 0.75~0.80 |
| LR + class_weight=balanced | 0.80~0.85 | 0.65~0.75 | 0.50~0.55 | 0.78~0.82 |
| Random Forest | 0.85~0.88 | 0.40~0.55 | 0.45~0.55 | 0.80~0.85 |
| XGBoost / LightGBM | 0.86~0.89 | 0.45~0.60 | 0.50~0.60 | 0.82~0.87 |
| 최종 튜닝 모델 (expected) | 0.83~0.87 | 0.65~0.75 | 0.55~0.65 | 0.83~0.88 |

> 주의: RF의 학습 데이터 CV 점수가 1.0에 가까울 경우 **과적합 징후**이므로, 반드시 test set 성능을 별도 확인해야 한다.

---

## 6. 전처리에서의 통계적 고려사항

### 6.1 스케일링 필요성
- Logistic Regression은 피처 스케일에 민감 → StandardScaler 필수
- 스케일링 없이 LR을 돌리면 수렴 실패(ConvergenceWarning) 발생 확인됨
- Tree 계열은 스케일링 불필요하지만, 통일된 전처리 파이프라인을 위해 적용 가능

### 6.2 인코딩 방식 선택
| 변수 유형 | 인코딩 | 근거 |
|----------|--------|------|
| 이진 (OverTime, Gender) | Label Encoding (0/1) | 순서 관계 없지만 2개 값이므로 무방 |
| 명목형 (Department, JobRole) | One-Hot Encoding | 순서 관계 없는 다범주 |
| 순서형 (Satisfaction, Education) | 원본 숫자 유지 | 이미 1~4 순서 스케일 |

### 6.3 상수 및 ID 컬럼 제거
- **EmployeeCount** (전원 1), **StandardHours** (전원 80), **Over18** (전원 Y) → 분산 0, 정보 없음
- **EmployeeNumber** → 식별자(ID)이므로 예측에 사용하면 데이터 누수

---

## 7. 교차검증 설계

| 설정 | 값 | 근거 |
|------|---|------|
| 방법 | **Stratified K-Fold** | 클래스 불균형 시 각 폴드의 퇴사 비율 유지 |
| K | 5 | 1,470건 데이터에서 각 폴드 약 294건, 충분한 검증 크기 |
| 반복 | shuffle=True, random_state 고정 | 재현성 보장 |

> 일반 K-Fold를 쓰면 특정 폴드에 퇴사자가 극소수로 배정되어 평가가 불안정해진다.

---

## 8. 면접에서 예상되는 통계 관련 질문

| 질문 | 핵심 답변 포인트 |
|------|----------------|
| "왜 Accuracy 대신 F1/Recall을 썼나요?" | 클래스 불균형(16:84), FN의 비즈니스 비용이 FP보다 큼 |
| "야근이 퇴사 원인이라고 확신하나요?" | 오즈비 3.77로 강한 연관성 확인. 단, 관찰 데이터이므로 인과관계가 아닌 상관관계 |
| "성별은 왜 제외했나요?" | 카이제곱 검정 p=0.291, Cramer's V=0.028로 통계적 유의성 없음 |
| "다중공선성은 어떻게 처리했나요?" | VIF 확인 후 선형 모델에서 문제 변수 제거, 트리 모델은 강건하므로 유지 |
| "미혼자 퇴사율이 높은 건 차별 아닌가요?" | 교란변수(연령, 소득) 통제 후 순수 효과 확인 필요. 정책은 결혼상태가 아닌 근속/만족도 기반으로 설계 |
| "과적합은 어떻게 확인했나요?" | 학습/검증 성능 갭, 교차검증 분산, Learning Curve로 진단 |
